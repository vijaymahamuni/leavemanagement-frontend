{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _Effect = _interopRequireDefault(require(\"./Effect\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nvar defaultSetTimeout = function defaultSetTimeout(callback) {\n  setTimeout(callback, 1000.0 / 60.0);\n};\nvar defaultClearTimeout = function defaultClearTimeout(timer) {\n  clearTimeout(timer);\n};\nvar requestAnimationFrame = function () {\n  if (typeof window === 'undefined') {\n    return defaultSetTimeout;\n  } else {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || defaultSetTimeout;\n  }\n}();\nvar cancelAnimationFrame = function () {\n  if (typeof window === 'undefined') {\n    return defaultClearTimeout;\n  } else {\n    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || defaultClearTimeout;\n  }\n}();\nvar now = typeof window !== 'undefined' && window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\nvar getTime = function getTime() {\n  return now && now.call(performance) || Date.now();\n};\nvar AnimationCounter = /*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnimationCounter, _React$Component);\n  function AnimationCounter(props) {\n    var _this;\n    _classCallCheck(this, AnimationCounter);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnimationCounter).call(this, props));\n    _this.state = {};\n    _this.node = undefined;\n    return _this;\n  }\n  _createClass(AnimationCounter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.count > 0) {\n        this.node = _reactDom[\"default\"].findDOMNode(this.refs.badge);\n        this.animate();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.count > prevProps.count) {\n        this.node = _reactDom[\"default\"].findDOMNode(this.refs.badge);\n        this.animate();\n      }\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var _this2 = this;\n      var style0 = {\n        '-moz-transform': this.props.effect[0],\n        '-webkit-transform': this.props.effect[0],\n        '-o-transform': this.props.effect[0],\n        transform: this.props.effect[0]\n      };\n      this.attachStyle(style0);\n      if (this.props.effect[2]) {\n        this.attachStyle(this.props.effect[2]);\n      }\n      var startTime = getTime();\n      var timer;\n      var waitOrFinish = function waitOrFinish() {\n        var lastTime = getTime();\n        var frame = Math.floor((lastTime - startTime) / (1000.0 / 60.0) % _this2.props.frameLength);\n        if (frame === _this2.props.frameLength - 1) {\n          cancelAnimationFrame(timer);\n          var style1 = {\n            '-moz-transform': _this2.props.effect[1],\n            '-webkit-transform': _this2.props.effect[1],\n            '-o-transform': _this2.props.effect[1],\n            transform: _this2.props.effect[1]\n          };\n          _this2.attachStyle(style1);\n          if (_this2.props.effect[3]) {\n            _this2.attachStyle(_this2.props.effect[3]);\n          }\n        } else {\n          timer = requestAnimationFrame(waitOrFinish);\n        }\n      };\n      waitOrFinish();\n    }\n  }, {\n    key: \"attachStyle\",\n    value: function attachStyle(style) {\n      for (var key in style) {\n        if (style.hasOwnProperty(key)) {\n          this.node.style[key] = style[key];\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var value = this.props.label || this.props.count;\n      return _react[\"default\"].createElement(\"span\", {\n        ref: \"badge\",\n        style: this.props.style,\n        className: this.props.className\n      }, value);\n    }\n  }]);\n  return AnimationCounter;\n}(_react[\"default\"].Component);\nAnimationCounter.propTypes = {\n  count: _propTypes[\"default\"].number,\n  label: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  effect: _propTypes[\"default\"].array,\n  frameLength: _propTypes[\"default\"].number,\n  className: _propTypes[\"default\"].string\n};\nAnimationCounter.defaultProps = {\n  count: 1,\n  label: null,\n  style: {},\n  effect: _Effect[\"default\"].SCALE,\n  frameLength: 30.0\n};\nvar _default = AnimationCounter;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}