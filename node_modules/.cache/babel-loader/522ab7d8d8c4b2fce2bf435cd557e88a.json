{"ast":null,"code":"import _slicedToArray from \"C:\\\\Project\\\\Front_end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Project\\\\Front_end\\\\src\\\\new_chat\\\\User.js\";\nimport React, { useEffect, useState } from \"react\";\nimport './User.css';\nimport { onSnapshot, doc } from \"firebase/firestore\";\nimport { db, auth, storage } from \"../firebase\";\nvar User = function User(_ref) {\n  var user1 = _ref.user1,\n    user = _ref.user,\n    selectUser = _ref.selectUser,\n    chat = _ref.chat;\n  var user2 = user ? user.uid : null;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  useEffect(function () {\n    var id = user1 > user2 ? \"\".concat(user1 + user2) : \"\".concat(user2 + user1);\n    console.log(\"user1 ids printed is\", user1);\n\n    // console.log(\"user1 ids printed is\",ids)\n    // const id='MlpqE6L8yPZuCC0QryHeykpUTnu275fKdWIIhMfgA1veGRTC1UJ2Wdk1';\n\n    var unsub = onSnapshot(doc(db, \"lastMsg\", id), function (doc) {\n      setData(doc.data());\n    });\n    return function () {\n      return unsub();\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_wrapper \".concat(chat.newfirstname === user.newfirstname && \"selected_user\"),\n    onClick: function onClick() {\n      return selectUser(user);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_detail\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imgbx\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"http://localhost:5000/images/10\",\n    className: \"cover\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"chatName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, user.newfirstname), data && user1 && data.from !== user1 && data.unread && /*#__PURE__*/React.createElement(\"small\", {\n    className: \"unread\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }, \"New\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_status \".concat(user.isOnline ? \"online\" : \"offline\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  })), data && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"truncate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, data.text)));\n};\nexport default User;","map":{"version":3,"names":["React","useEffect","useState","onSnapshot","doc","db","auth","storage","User","_ref","user1","user","selectUser","chat","user2","uid","_useState","_useState2","_slicedToArray","data","setData","id","concat","console","log","unsub","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","newfirstname","onClick","src","from","unread","isOnline","text"],"sources":["C:/Project/Front_end/src/new_chat/User.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport './User.css';\r\nimport { onSnapshot,doc } from \"firebase/firestore\";\r\nimport { db, auth, storage } from \"../firebase\";\r\n\r\nconst User = ({ user1, user, selectUser, chat }) => {\r\n\r\n  const user2 = user ? user.uid : null;\r\n\r\n \r\n\r\n\r\n  const [data,setData]=useState(\"\");\r\n\r\n  useEffect(()=>{\r\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\r\n    console.log(\"user1 ids printed is\",user1)\r\n\r\n    // console.log(\"user1 ids printed is\",ids)\r\n    // const id='MlpqE6L8yPZuCC0QryHeykpUTnu275fKdWIIhMfgA1veGRTC1UJ2Wdk1';\r\n\r\n    let unsub=onSnapshot(doc(db,\"lastMsg\",id),(doc)=>{\r\n      setData(doc.data());\r\n    });\r\n    return ()=>unsub();\r\n  },[]);\r\n\r\n\r\n  return(\r\n    <div>\r\n    \r\n     <div         \r\n     className={`user_wrapper ${chat.newfirstname === user.newfirstname && \"selected_user\"}`}\r\n     onClick={()=>selectUser(user)}>\r\n        <div className=\"user_info\">\r\n          <div className=\"user_detail\">\r\n          <div className=\"imgbx\">\r\n                  <img src={`http://localhost:5000/images/10`} className=\"cover\"  />\r\n                </div>     \r\n          <p className=\"chatName\">{user.newfirstname}</p>\r\n          {data && user1 && data.from !== user1 && data.unread && (\r\n  <small className=\"unread\">New</small>\r\n)}\r\n\r\n            \r\n          </div>\r\n          <div\r\n            className={`user_status ${user.isOnline ? \"online\" : \"offline\"}`}\r\n          ></div>\r\n        </div>\r\n\r\n        {data && (\r\n          <p className=\"truncate\">\r\n           {data.text}\r\n          </p>\r\n        )}\r\n    </div>\r\n    </div>\r\n  )  \r\n}\r\nexport default User;"],"mappings":"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"},"metadata":{},"sourceType":"module"}